"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9624],{99624:(e,s,n)=>{n.r(s),n.d(s,{default:()=>g});var t=n(65043),c=(n(25015),n(6145)),l=n(97746),a=n(73216),o=n(38937),r=n(13286),i=n(87792),d=n(69281),x=n(37285),h=n(55077),m=n(93946),j=n(70579);const g=()=>{const e=(0,a.Zp)(),[s]=(0,t.useState)((0,o.i1)("MEDIA")),[n]=(0,t.useState)((0,o.i1)("CNTRY")),[g,p]=(0,t.useState)(),[u,N]=(0,t.useState)(null);(0,t.useEffect)((()=>{b(),q(),k()}),[]);const b=async()=>{console.log(">>>>!!?");const e={connectHeaders:{},brokerURL:h.A.wsUrl,debug:function(e){console.log("STOMP ADMIN: "+e)},forceBinaryWSFrames:!0,appendMissingNULLonIncoming:!0,onConnect:function(e){console.log("Connected to server."),console.log("connected >>>> ADMIN")},onStompError:e=>{console.log("Additional details: "+e.body)},onMessage:function(e){console.log(">>>\uc5ec\uae41\ub2c8\ub2e4 \ubc1b\uc558Received message:",e.body)}},s=new x.K(e);N(s),s.activate(),s.onConnect=e=>{s.subscribe("/topic/request-song",(function(e){console.log(">>>>ADMIN !>>"),console.log(JSON.parse(e.body));var s=JSON.parse(e.body);"APP_REQUEST_SONG"==s.type&&(console.log("DISPLAY : ADMIN_UPDATE_PLAYING!!! >> "+s.requestSongSize),q(),console.log("SONG_REQ!!!!!!!!!!"))}))}},[y,f]=(0,t.useState)(!1),[C,v]=(0,t.useState)(!1),I=(e,s)=>{e.preventDefault(),p(s),v(!C)},[S,w]=(0,t.useState)({contents:[]}),[A,$]=(0,t.useState)({}),[_,T]=(0,t.useState)({}),k=async()=>{try{const e=(await d.A.get("/api/song-request/condition",{headers:{"Content-Type":"application/json"}})).data;console.log("\ud604\uc7ac??"),console.log(e),T(e)}catch(s){console.log(s),(0,o.$8)(s,e)}},q=async()=>{const e=(0,o.AV)();D(e),E(e)},D=async s=>{try{const e=(await d.A.get("/api/song-request",{params:{date:s},headers:{"Content-Type":"application/json"}})).data;w(e),console.log(e)}catch(n){console.log(n),(0,o.$8)(n,e)}},E=async s=>{try{const e=(await d.A.get("/api/song-request/now-playing",{params:{date:s},headers:{"Content-Type":"application/json"}})).data;$(e),console.log(e)}catch(n){console.log(n),(0,o.$8)(n,e)}},P=async s=>{console.log(s);try{const e=await d.A.post("/api/song-request/now-playing/register",{songRequestId:s},{headers:{"Content-Type":"application/json"}});console.log("API \uc751\ub2f5:",e.data),alert("\uc120\uace1\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),q()}catch(n){console.log(n),(0,o.$8)(n,e)}},M=async s=>{console.log(s);try{const e=await d.A.delete("/api/song-request/"+s);console.log("API \uc751\ub2f5:",e.data),alert("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),q()}catch(n){console.log(n),(0,o.$8)(n,e)}},R=(e,s)=>{e.preventDefault();var n="\uc2e0\uccad\uace1\uc744 \uc911\ub2e8 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?";s&&(n="\uc2e0\uccad\uace1\uc744 \ubc1b\uae30 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?");window.confirm(n)&&z(s)},z=async s=>{try{const e=await d.A.post("/api/song-request/condition",{requestSongAvailable:s},{headers:{"Content-Type":"application/json"}});console.log("API \uc751\ub2f5:",e.data),alert("\ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),q(),k()}catch(n){console.log(n),(0,o.$8)(n,e)}},O=async()=>{try{const e=await d.A.post("/api/song-request/now-playing/complete");console.log("API \uc751\ub2f5:",e.data),alert("\uace1\uc774 \ub05d\ub0ac\uc2b5\ub2c8\ub2e4."),q()}catch(s){console.log(s),(0,o.$8)(s,e)}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(m.zS,{size:"xl",visible:y,onClose:()=>f(!1),"aria-labelledby":"OptionalSizesExample2",children:[(0,j.jsx)(m.E4,{children:(0,j.jsx)(m.lb,{id:"OptionalSizesExample1",children:"\uc2e0\uccad\uace1 \ucd94\uac00"})}),(0,j.jsx)(m.Tc,{children:(0,j.jsx)(r.A,{openModal:e=>{f(e)},sendDataToParent:async s=>{console.log("Data from child:",s),console.log(s);for(var n=[],t=0;t<s.length;t++)n[t]={songId:s[t].songId,tableId:1};try{const e=await d.A.post("/api/song-request",n,{headers:{"Content-Type":"application/json"}});console.log("API \uc751\ub2f5:",e.data),alert(" \ucd94\uac00 \ub418\uc5c8\uc2b5\ub2c8\ub2e4."),q()}catch(c){console.log(c),(0,o.$8)(c,e)}}})})]}),(0,j.jsxs)(m.zS,{size:"xl",visible:C,onClose:()=>v(!1),"aria-labelledby":"OptionalSizesExample4",children:[(0,j.jsx)(m.E4,{children:(0,j.jsx)(m.lb,{id:"OptionalSizesExample3",children:"\uc568\ubc94\uc815\ubcf4"})}),(0,j.jsx)(m.Tc,{children:(0,j.jsx)(i.A,{openModal:e=>{v(e)},albumId:g})})]}),(0,j.jsx)(m.sK,{children:(0,j.jsxs)(m.UF,{children:[(0,j.jsxs)(m.E$,{className:"mb-4",children:[(0,j.jsx)(m.V0,{children:(0,j.jsx)("strong",{children:"\uc2e0\uccad\uace1\uad00\ub9ac"})}),(0,j.jsxs)(m.W6,{children:[(0,j.jsx)(m.sK,{className:"justify-content-between",children:(0,j.jsx)(m.UF,{xs:12,children:(0,j.jsx)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:_.requestSongAvailable?(0,j.jsx)(m.Q_,{component:"input",type:"reset",color:"danger",value:"\uc2e0\uccad\uace1\uc815\uc9c0",onClick:e=>R(e,!1)}):(0,j.jsx)(m.Q_,{component:"input",color:"info",value:"\uc2e0\uccad\uace1\uc2dc\uc791",onClick:e=>R(e,!0)})})})}),(0,j.jsx)("br",{}),(0,j.jsxs)(m._v,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[(0,j.jsx)(m.wV,{color:"light",children:(0,j.jsxs)(m.YI,{children:[(0,j.jsx)(m.$s,{className:"text-center"}),(0,j.jsx)(m.$s,{className:"text-center",children:"\uc568\ubc94\uba85"}),(0,j.jsx)(m.$s,{className:"text-center",children:"\uc544\ud2f0\uc2a4\ud2b8"}),(0,j.jsx)(m.$s,{className:"text-center",children:"TrackNumber"}),(0,j.jsx)(m.$s,{className:"text-center",children:"Title"}),(0,j.jsx)(m.$s,{className:"text-center",children:"Running Time"})]})}),(0,j.jsx)(m.jS,{children:A&&null!=A.id?(0,j.jsxs)(m.YI,{"v-for":"item in tableItems",children:[(0,j.jsx)(m.$s,{className:"text-center",color:"light",children:"Now Playing"}),(0,j.jsx)(m.cC,{className:"text-center",children:(0,j.jsx)("strong",{children:(0,j.jsx)("a",{href:"/",onClick:e=>I(e,A.albumId),children:A.albumName})})}),(0,j.jsx)(m.cC,{className:"text-center",children:(0,j.jsx)("strong",{children:A.artist})}),(0,j.jsx)(m.cC,{className:"text-center",children:(0,j.jsx)("strong",{children:A.trackNumber})}),(0,j.jsx)(m.cC,{className:"text-center",children:(0,j.jsx)("strong",{children:A.title})}),(0,j.jsx)(m.cC,{className:"text-center",children:(0,j.jsx)("strong",{children:A.runningTime})})]}):(0,j.jsxs)(m.YI,{"v-for":"item in tableItems",children:[(0,j.jsx)(m.$s,{color:"light",className:"text-center",children:"Now Playing"}),(0,j.jsx)(m.cC,{className:"text-center",colSpan:5,children:"-"},0)]})})]}),(0,j.jsx)("br",{}),A&&null!=A.id?(0,j.jsx)("div",{className:"d-grid gap-2",children:(0,j.jsx)(m.sK,{className:"justify-content-between",children:(0,j.jsx)(m.UF,{xs:12,children:(0,j.jsx)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:(0,j.jsx)(m.Q_,{component:"input",color:"success",value:"\uace1\uc644\ub8cc",onClick:e=>(e=>{e.preventDefault(),window.confirm("\ud574\ub2f9\uace1\uc744 \uc644\ub8cc \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&O()})(e)})})})})}):""]})]}),(0,j.jsxs)(m.E$,{className:"mb-4",children:[(0,j.jsxs)(m.V0,{children:[(0,j.jsx)("strong",{children:"\uc2e0\uccad\uace1\ubaa9\ub85d"})," ",(0,j.jsx)("small",{children:"  \uc624\uc804 6\uc2dc\uc5d0 \ucd08\uae30\ud654 \ub429\ub2c8\ub2e4."})," ",S.contents&&S.contents.length>0?(0,j.jsxs)("small",{children:["\ucd1d ",S.contents.length,"\uac74"]}):""]}),(0,j.jsxs)(m.W6,{children:[(0,j.jsx)("div",{className:"d-grid gap-2",children:(0,j.jsx)(m.sK,{className:"justify-content-between",children:(0,j.jsx)(m.UF,{xs:12,children:(0,j.jsxs)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[(0,j.jsx)(m.Q_,{component:"input",type:"reset",color:"secondary",value:"\uc2e0\uccad\uace1 \ucd94\uac00",onClick:()=>{f(!y)}}),(0,j.jsx)(m.Q_,{color:"light",onClick:q,children:(0,j.jsx)(c.A,{icon:l.g,title:"Download file"})})]})})})}),(0,j.jsx)("br",{}),(0,j.jsxs)(m._v,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[(0,j.jsx)(m.wV,{color:"light",children:(0,j.jsxs)(m.YI,{children:[(0,j.jsx)(m.$s,{className:"text-center",children:"No"}),(0,j.jsx)(m.$s,{className:"text-center",children:"\uc568\ubc94\uba85"}),(0,j.jsx)(m.$s,{className:"text-center",children:"\uc544\ud2f0\uc2a4\ud2b8"}),(0,j.jsx)(m.$s,{className:"text-center",children:"Track Number"}),(0,j.jsx)(m.$s,{className:"text-center",children:"Title"}),(0,j.jsx)(m.$s,{className:"text-center",children:"Table Number"}),(0,j.jsx)(m.$s,{className:"text-center"}),(0,j.jsx)(m.$s,{className:"text-center",children:"Running Time"})]})}),(0,j.jsx)(m.jS,{children:S&&S.length>0?S.map(((e,s)=>(0,j.jsxs)(m.YI,{"v-for":"item in tableItems",children:[(0,j.jsx)(m.cC,{className:"text-center",children:(0,j.jsx)("strong",{children:s+1})}),(0,j.jsx)(m.cC,{className:"text-left",children:(0,j.jsx)("strong",{children:(0,j.jsx)("a",{href:"/",onClick:s=>I(s,e.albumId),children:e.albumName})})}),(0,j.jsx)(m.cC,{className:"text-left",children:e.artist}),(0,j.jsx)(m.cC,{className:"text-center",children:e.trackNumber}),(0,j.jsx)(m.cC,{className:"text-left",children:e.title}),(0,j.jsx)(m.cC,{className:"text-center",children:"0"==e.tableName?"\uad00\ub9ac\uc790":e.tableName}),(0,j.jsxs)(m.cC,{className:"text-center",children:[(0,j.jsx)(m.Q_,{color:"success",shape:"rounded-pill",className:"mb-3",onClick:s=>((e,s)=>{e.preventDefault(),window.confirm("\ud574\ub2f9\uace1\uc744 \uc120\uace1 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&P(s)})(s,e.songRequestId),children:"\uc120\uace1"}),(0,j.jsx)(m.Q_,{color:"dark",shape:"rounded-pill",className:"mb-3",onClick:s=>((e,s)=>{e.preventDefault(),window.confirm("\ud574\ub2f9\uace1\uc744 \uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&M(s)})(s,e.songRequestId),children:"\uc0ad\uc81c"})]}),(0,j.jsx)(m.cC,{className:"text-center",children:e.runningTime})]},s))):(0,j.jsx)(m.YI,{"v-for":"item in tableItems",children:(0,j.jsx)(m.cC,{className:"text-center",colSpan:7,children:"\uc870\ud68c\ub41c \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."},0)})})]})]})]})]})})]})}}}]);
//# sourceMappingURL=9624.16da3a60.chunk.js.map