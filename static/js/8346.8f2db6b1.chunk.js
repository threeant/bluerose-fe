"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8346],{28346:(e,s,n)=>{n.r(s),n.d(s,{default:()=>N});var t=n(72791),l=(n(68639),n(24846)),c=n(97071),a=n(57689),o=n(15614),i=n(48936),r=n(10426),d=n(12620),x=n(45333),h=n(74968),m=n(78983),j=n(80184);const N=()=>{const e=(0,a.s0)(),[s]=(0,t.useState)((0,o.ri)("MEDIA")),[n]=(0,t.useState)((0,o.ri)("CNTRY")),[N,g]=(0,t.useState)(),[p,u]=(0,t.useState)(null);(0,t.useEffect)((()=>{b(),q(),D()}),[]);const b=async()=>{console.log(">>>>!!?");const e={connectHeaders:{},brokerURL:h.Z.wsUrl,debug:function(e){console.log("STOMP ADMIN: "+e)},forceBinaryWSFrames:!0,appendMissingNULLonIncoming:!0,onConnect:function(e){console.log("Connected to server."),console.log("connected >>>> ADMIN")},onStompError:e=>{console.log("Additional details: "+e.body)},onMessage:function(e){console.log(">>>\uc5ec\uae41\ub2c8\ub2e4 \ubc1b\uc558Received message:",e.body)}},s=new x.K(e);u(s),s.activate(),s.onConnect=e=>{s.subscribe("/topic/request-song",(function(e){console.log(">>>>ADMIN !>>"),console.log(JSON.parse(e.body));var s=JSON.parse(e.body);"APP_REQUEST_SONG"==s.type&&(console.log("DISPLAY : ADMIN_UPDATE_PLAYING!!! >> "+s.requestSongSize),q(),console.log("SONG_REQ!!!!!!!!!!"))}))}},[y,f]=(0,t.useState)(!1),[v,S]=(0,t.useState)(!1),w=(e,s)=>{e.preventDefault(),g(s),S(!v)},[T,I]=(0,t.useState)({contents:[]}),[_,C]=(0,t.useState)({}),[k,A]=(0,t.useState)({}),D=async()=>{try{const e=(await d.Z.get("/api/song-request/condition",{headers:{"Content-Type":"application/json"}})).data;console.log("\ud604\uc7ac??"),console.log(e),A(e)}catch(s){console.log(s),(0,o._y)(s,e)}},q=async()=>{const e=(0,o.Ux)();P(e),R(e)},P=async s=>{try{const e=(await d.Z.get("/api/song-request",{params:{date:s},headers:{"Content-Type":"application/json"}})).data;I(e),console.log(e)}catch(n){console.log(n),(0,o._y)(n,e)}},R=async s=>{try{const e=(await d.Z.get("/api/song-request/now-playing",{params:{date:s},headers:{"Content-Type":"application/json"}})).data;C(e),console.log(e)}catch(n){console.log(n),(0,o._y)(n,e)}},Z=async s=>{console.log(s);try{const e=await d.Z.post("/api/song-request/now-playing/register",{songRequestId:s},{headers:{"Content-Type":"application/json"}});console.log("API \uc751\ub2f5:",e.data),alert("\uc120\uace1\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),q()}catch(n){console.log(n),(0,o._y)(n,e)}},E=async s=>{console.log(s);try{const e=await d.Z.delete("/api/song-request/"+s);console.log("API \uc751\ub2f5:",e.data),alert("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),q()}catch(n){console.log(n),(0,o._y)(n,e)}},M=(e,s)=>{e.preventDefault();var n="\uc2e0\uccad\uace1\uc744 \uc911\ub2e8 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?";s&&(n="\uc2e0\uccad\uace1\uc744 \ubc1b\uae30 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?");window.confirm(n)&&O(s)},O=async s=>{try{const e=await d.Z.post("/api/song-request/condition",{requestSongAvailable:s},{headers:{"Content-Type":"application/json"}});console.log("API \uc751\ub2f5:",e.data),alert("\ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),q(),D()}catch(n){console.log(n),(0,o._y)(n,e)}},z=async()=>{try{const e=await d.Z.post("/api/song-request/now-playing/complete");console.log("API \uc751\ub2f5:",e.data),alert("\uace1\uc774 \ub05d\ub0ac\uc2b5\ub2c8\ub2e4."),q()}catch(s){console.log(s),(0,o._y)(s,e)}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(m.Tk,{size:"xl",visible:y,onClose:()=>f(!1),"aria-labelledby":"OptionalSizesExample2",children:[(0,j.jsx)(m.p0,{children:(0,j.jsx)(m.fl,{id:"OptionalSizesExample1",children:"\uc2e0\uccad\uace1 \ucd94\uac00"})}),(0,j.jsx)(m.sD,{children:(0,j.jsx)(i.Z,{openModal:e=>{f(e)},sendDataToParent:async s=>{console.log("Data from child:",s),console.log(s);for(var n=[],t=0;t<s.length;t++)n[t]={songId:s[t].songId,tableId:1};try{const e=await d.Z.post("/api/song-request",n,{headers:{"Content-Type":"application/json"}});console.log("API \uc751\ub2f5:",e.data),alert(" \ucd94\uac00 \ub418\uc5c8\uc2b5\ub2c8\ub2e4."),q()}catch(l){console.log(l),(0,o._y)(l,e)}}})})]}),(0,j.jsxs)(m.Tk,{size:"xl",visible:v,onClose:()=>S(!1),"aria-labelledby":"OptionalSizesExample4",children:[(0,j.jsx)(m.p0,{children:(0,j.jsx)(m.fl,{id:"OptionalSizesExample3",children:"\uc568\ubc94\uc815\ubcf4"})}),(0,j.jsx)(m.sD,{children:(0,j.jsx)(r.Z,{openModal:e=>{S(e)},albumId:N})})]}),(0,j.jsx)(m.rb,{children:(0,j.jsxs)(m.b7,{children:[(0,j.jsxs)(m.xH,{className:"mb-4",children:[(0,j.jsx)(m.bn,{children:(0,j.jsx)("strong",{children:"\uc2e0\uccad\uace1\uad00\ub9ac"})}),(0,j.jsxs)(m.sl,{children:[(0,j.jsx)(m.rb,{className:"justify-content-between",children:(0,j.jsx)(m.b7,{xs:12,children:(0,j.jsx)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:k.requestSongAvailable?(0,j.jsx)(m.u5,{component:"input",type:"reset",color:"danger",value:"\uc2e0\uccad\uace1\uc815\uc9c0",onClick:e=>M(e,!1)}):(0,j.jsx)(m.u5,{component:"input",color:"info",value:"\uc2e0\uccad\uace1\uc2dc\uc791",onClick:e=>M(e,!0)})})})}),(0,j.jsx)("br",{}),(0,j.jsxs)(m.Sx,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[(0,j.jsx)(m.V,{color:"light",children:(0,j.jsxs)(m.T6,{children:[(0,j.jsx)(m.is,{className:"text-center"}),(0,j.jsx)(m.is,{className:"text-center",children:"\uc568\ubc94\uba85"}),(0,j.jsx)(m.is,{className:"text-center",children:"\uc544\ud2f0\uc2a4\ud2b8"}),(0,j.jsx)(m.is,{className:"text-center",children:"TrackNumber"}),(0,j.jsx)(m.is,{className:"text-center",children:"Title"}),(0,j.jsx)(m.is,{className:"text-center",children:"Running Time"})]})}),(0,j.jsx)(m.NR,{children:_&&null!=_.id?(0,j.jsxs)(m.T6,{"v-for":"item in tableItems",children:[(0,j.jsx)(m.is,{className:"text-center",color:"light",children:"Now Playing"}),(0,j.jsx)(m.NN,{className:"text-center",children:(0,j.jsx)("strong",{children:(0,j.jsx)("a",{href:"/",onClick:e=>w(e,_.albumId),children:_.albumName})})}),(0,j.jsx)(m.NN,{className:"text-center",children:(0,j.jsx)("strong",{children:_.artist})}),(0,j.jsx)(m.NN,{className:"text-center",children:(0,j.jsx)("strong",{children:_.trackNumber})}),(0,j.jsx)(m.NN,{className:"text-center",children:(0,j.jsx)("strong",{children:_.title})}),(0,j.jsx)(m.NN,{className:"text-center",children:(0,j.jsx)("strong",{children:_.runningTime})})]}):(0,j.jsxs)(m.T6,{"v-for":"item in tableItems",children:[(0,j.jsx)(m.is,{color:"light",className:"text-center",children:"Now Playing"}),(0,j.jsx)(m.NN,{className:"text-center",colSpan:5,children:"-"},0)]})})]}),(0,j.jsx)("br",{}),_&&null!=_.id?(0,j.jsx)("div",{className:"d-grid gap-2",children:(0,j.jsx)(m.rb,{className:"justify-content-between",children:(0,j.jsx)(m.b7,{xs:12,children:(0,j.jsx)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:(0,j.jsx)(m.u5,{component:"input",color:"success",value:"\uace1\uc644\ub8cc",onClick:e=>(e=>{e.preventDefault(),window.confirm("\ud574\ub2f9\uace1\uc744 \uc644\ub8cc \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&z()})(e)})})})})}):""]})]}),(0,j.jsxs)(m.xH,{className:"mb-4",children:[(0,j.jsxs)(m.bn,{children:[(0,j.jsx)("strong",{children:"\uc2e0\uccad\uace1\ubaa9\ub85d"})," ",(0,j.jsx)("small",{children:"  \uc624\uc804 6\uc2dc\uc5d0 \ucd08\uae30\ud654 \ub429\ub2c8\ub2e4."})," ",T.contents&&T.contents.length>0?(0,j.jsxs)("small",{children:["\ucd1d ",T.contents.length,"\uac74"]}):""]}),(0,j.jsxs)(m.sl,{children:[(0,j.jsx)("div",{className:"d-grid gap-2",children:(0,j.jsx)(m.rb,{className:"justify-content-between",children:(0,j.jsx)(m.b7,{xs:12,children:(0,j.jsxs)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[(0,j.jsx)(m.u5,{component:"input",type:"reset",color:"secondary",value:"\uc2e0\uccad\uace1 \ucd94\uac00",onClick:()=>{f(!y)}}),(0,j.jsx)(m.u5,{color:"light",onClick:q,children:(0,j.jsx)(l.Z,{icon:c.H,title:"Download file"})})]})})})}),(0,j.jsx)("br",{}),(0,j.jsxs)(m.Sx,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[(0,j.jsx)(m.V,{color:"light",children:(0,j.jsxs)(m.T6,{children:[(0,j.jsx)(m.is,{className:"text-center",children:"No"}),(0,j.jsx)(m.is,{className:"text-center",children:"\uc568\ubc94\uba85"}),(0,j.jsx)(m.is,{className:"text-center",children:"\uc544\ud2f0\uc2a4\ud2b8"}),(0,j.jsx)(m.is,{className:"text-center",children:"Track Number"}),(0,j.jsx)(m.is,{className:"text-center",children:"Title"}),(0,j.jsx)(m.is,{className:"text-center",children:"Table Number"}),(0,j.jsx)(m.is,{className:"text-center"}),(0,j.jsx)(m.is,{className:"text-center",children:"Running Time"})]})}),(0,j.jsx)(m.NR,{children:T&&T.length>0?T.map(((e,s)=>(0,j.jsxs)(m.T6,{"v-for":"item in tableItems",children:[(0,j.jsx)(m.NN,{className:"text-center",children:(0,j.jsx)("strong",{children:s+1})}),(0,j.jsx)(m.NN,{className:"text-left",children:(0,j.jsx)("strong",{children:(0,j.jsx)("a",{href:"/",onClick:s=>w(s,e.albumId),children:e.albumName})})}),(0,j.jsx)(m.NN,{className:"text-left",children:e.artist}),(0,j.jsx)(m.NN,{className:"text-center",children:e.trackNumber}),(0,j.jsx)(m.NN,{className:"text-left",children:e.title}),(0,j.jsx)(m.NN,{className:"text-center",children:"0"==e.tableName?"\uad00\ub9ac\uc790":e.tableName}),(0,j.jsxs)(m.NN,{className:"text-center",children:[(0,j.jsx)(m.u5,{color:"success",shape:"rounded-pill",className:"mb-3",onClick:s=>((e,s)=>{e.preventDefault(),window.confirm("\ud574\ub2f9\uace1\uc744 \uc120\uace1 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&Z(s)})(s,e.songRequestId),children:"\uc120\uace1"}),(0,j.jsx)(m.u5,{color:"dark",shape:"rounded-pill",className:"mb-3",onClick:s=>((e,s)=>{e.preventDefault(),window.confirm("\ud574\ub2f9\uace1\uc744 \uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&E(s)})(s,e.songRequestId),children:"\uc0ad\uc81c"})]}),(0,j.jsx)(m.NN,{className:"text-center",children:e.runningTime})]},s))):(0,j.jsx)(m.T6,{"v-for":"item in tableItems",children:(0,j.jsx)(m.NN,{className:"text-center",colSpan:7,children:"\uc870\ud68c\ub41c \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."},0)})})]})]})]})]})})]})}}}]);
//# sourceMappingURL=8346.8f2db6b1.chunk.js.map