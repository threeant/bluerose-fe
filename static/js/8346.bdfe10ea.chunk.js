"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8346],{28346:(e,s,n)=>{n.r(s),n.d(s,{default:()=>g});var t=n(72791),l=(n(68639),n(24846)),c=n(97071),a=n(57689),o=n(15614),i=n(48936),r=n(10426),d=n(12620),x=n(45333),h=n(74968),m=n(26385),j=n(78983),p=n(80184);const g=()=>{const e=(0,a.s0)(),[s,n]=(0,t.useState)(),[g,N]=(0,t.useState)(""),[u,b]=(0,t.useState)(!1),[y,f]=(0,t.useState)(""),[S,v]=(0,t.useState)(""),T=e=>{N("alert"),f(e),b(!0)},I=(e,s)=>{N("confirm"),f(e),b(!0),v(s)};(0,t.useEffect)((()=>{w(),U(),z(),_()}),[]);const _=async()=>{try{const e=await d.Z.post("/api/callRefresh",{code:"100",msg:"\uc2e0\uccad\uace1\ud5e4\ub354 refresh"});console.log("API \uc751\ub2f5:",e.data)}catch(e){console.log(e)}},w=async()=>{console.log(">>>>!!?");const e={connectHeaders:{},brokerURL:h.Z.wsUrl,debug:function(e){console.log("STOMP ADMIN: "+e)},forceBinaryWSFrames:!0,appendMissingNULLonIncoming:!0,onConnect:function(e){console.log("Connected to server."),console.log("connected >>>> ADMIN")},onStompError:e=>{console.log("Additional details: "+e.body)},onMessage:function(e){console.log(">>>\uc5ec\uae41\ub2c8\ub2e4 \ubc1b\uc558Received message:",e.body)}},s=new x.K(e);s.activate(),s.onConnect=e=>{s.subscribe("/topic/request-song",(function(e){console.log(">>>>ADMIN !>>"),console.log(JSON.parse(e.body));var s=JSON.parse(e.body);"APP_REQUEST_SONG"===s.type&&(console.log("DISPLAY : ADMIN_UPDATE_PLAYING!!! >> "+s.requestSongSize),U(),console.log("SONG_REQ!!!!!!!!!!"))}))}},[k,C]=(0,t.useState)(!1),[q,A]=(0,t.useState)(!1),P=(e,s)=>{e.preventDefault(),n(s),A(!q)},[D,Z]=(0,t.useState)({contents:[]}),[R,E]=(0,t.useState)({}),[M,O]=(0,t.useState)({}),z=async()=>{try{const e=(await d.Z.get("/api/song-request/condition",{headers:{"Content-Type":"application/json"}})).data;console.log("\ud604\uc7ac??"),console.log(e),O(e)}catch(s){console.log(s),(0,o._y)(s,e)}},U=async()=>{const e=(0,o.Ux)();L(e),H(e)},L=async s=>{try{const e=(await d.Z.get("/api/song-request",{params:{date:s},headers:{"Content-Type":"application/json"}})).data;Z(e),console.log(e)}catch(n){console.log(n),(0,o._y)(n,e)}},H=async s=>{try{const e=(await d.Z.get("/api/song-request/now-playing",{params:{date:s},headers:{"Content-Type":"application/json"}})).data;E(e),console.log(e)}catch(n){console.log(n),(0,o._y)(n,e)}},[F,G]=(0,t.useState)(),J=async()=>{console.log(F);try{const e=await d.Z.post("/api/song-request/now-playing/register",{songRequestId:F},{headers:{"Content-Type":"application/json"}});console.log("API \uc751\ub2f5:",e.data),T("\uc120\uace1\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),U()}catch(s){console.log(s),(0,o._y)(s,e)}},Q=async()=>{console.log(F);try{const e=await d.Z.delete("/api/song-request/"+F);console.log("API \uc751\ub2f5:",e.data),T("\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),U()}catch(s){console.log(s),(0,o._y)(s,e)}},V=(e,s)=>{e.preventDefault(),s?I("\uc2e0\uccad\uace1\uc744 \ub2e4\uc2dc \ubc1b\uc73c\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","reqStart"):I("\uc2e0\uccad\uace1 \ubc1b\uae30\ub97c \uc911\uc9c0 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","reqStop")},Y=async s=>{try{const e=await d.Z.post("/api/song-request/condition",{requestSongAvailable:s},{headers:{"Content-Type":"application/json"}});console.log("API \uc751\ub2f5:",e.data),T("\ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),U(),z()}catch(n){console.log(n),(0,o._y)(n,e)}},B=async()=>{try{const e=await d.Z.post("/api/song-request/now-playing/complete");console.log("API \uc751\ub2f5:",e.data),T("\uace1\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),U()}catch(s){console.log(s),(0,o._y)(s,e)}},K=async()=>{try{const e=await d.Z.delete("/api/song-request");console.log("API \uc751\ub2f5:",e.data),window.location.reload()}catch(s){console.log(s),(0,o._y)(s,e)}};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(m.Z,{type:g,visible:u,onClose:()=>{b(!1)},alertText:y,onAccpet:()=>{b(!1),"pick"===S?J():"delete"===S?Q():"reqStart"===S?Y(!0):"reqStop"===S?Y(!1):"complete"===S?B():"init"===S&&K(),v("")}}),(0,p.jsxs)(j.Tk,{size:"xl",visible:k,onClose:()=>C(!1),"aria-labelledby":"OptionalSizesExample2",children:[(0,p.jsx)(j.p0,{children:(0,p.jsx)(j.fl,{id:"OptionalSizesExample1",children:"\uc2e0\uccad\uace1 \ucd94\uac00"})}),(0,p.jsx)(j.sD,{children:(0,p.jsx)(i.Z,{openModal:e=>{C(e)},sendDataToParent:async s=>{console.log("Data from child:",s),console.log(s);for(var n=[],t=0;t<s.length;t++)n[t]={songId:s[t].songId,tableId:1};try{const e=await d.Z.post("/api/song-request",n,{headers:{"Content-Type":"application/json"}});console.log("API \uc751\ub2f5:",e.data),T("\ucd94\uac00 \ub418\uc5c8\uc2b5\ub2c8\ub2e4."),U()}catch(l){console.log(l),(0,o._y)(l,e)}}})})]}),(0,p.jsxs)(j.Tk,{size:"xl",visible:q,onClose:()=>A(!1),"aria-labelledby":"OptionalSizesExample4",children:[(0,p.jsx)(j.p0,{children:(0,p.jsx)(j.fl,{id:"OptionalSizesExample3",children:"\uc568\ubc94\uc815\ubcf4"})}),(0,p.jsx)(j.sD,{children:(0,p.jsx)(r.Z,{openModal:e=>{A(e)},albumId:s})})]}),(0,p.jsx)(j.rb,{children:(0,p.jsxs)(j.b7,{children:[(0,p.jsxs)(j.xH,{className:"mb-4",children:[(0,p.jsx)(j.bn,{children:(0,p.jsx)("strong",{children:"\uc2e0\uccad\uace1\uad00\ub9ac"})}),(0,p.jsxs)(j.sl,{children:[(0,p.jsx)(j.rb,{className:"justify-content-between",children:(0,p.jsx)(j.b7,{xs:12,children:(0,p.jsx)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:M.requestSongAvailable?(0,p.jsx)(j.u5,{component:"input",type:"reset",color:"danger",value:"\uc2e0\uccad\uace1\uc815\uc9c0",onClick:e=>V(e,!1)}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"p-3",children:"\uc9c0\uae08\uc740 \uc2e0\uccad\uace1\uc744 \ubc1b\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,p.jsx)(j.u5,{component:"input",color:"info",value:"\uc2e0\uccad\uace1\uc2dc\uc791",onClick:e=>V(e,!0)})]})})})}),(0,p.jsx)("br",{}),(0,p.jsxs)(j.Sx,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[(0,p.jsx)(j.V,{color:"light",children:(0,p.jsxs)(j.T6,{children:[(0,p.jsx)(j.is,{className:"text-center"}),(0,p.jsx)(j.is,{className:"text-center",children:"\uc568\ubc94\uba85"}),(0,p.jsx)(j.is,{className:"text-center",children:"\uc544\ud2f0\uc2a4\ud2b8"}),(0,p.jsx)(j.is,{className:"text-center",children:"TrackNumber"}),(0,p.jsx)(j.is,{className:"text-center",children:"Title"}),(0,p.jsx)(j.is,{className:"text-center",children:"Running Time"})]})}),(0,p.jsx)(j.NR,{children:R&&null!=R.id?(0,p.jsxs)(j.T6,{"v-for":"item in tableItems",children:[(0,p.jsx)(j.is,{className:"text-center",color:"light",children:"Now Playing"}),(0,p.jsx)(j.NN,{className:"text-center",children:(0,p.jsx)("a",{href:"/",onClick:e=>P(e,R.albumId),children:R.albumName})}),(0,p.jsx)(j.NN,{className:"text-center",children:R.artist}),(0,p.jsx)(j.NN,{className:"text-center",children:R.trackNumber}),(0,p.jsx)(j.NN,{className:"text-center",children:(0,p.jsx)("strong",{children:R.title})}),(0,p.jsx)(j.NN,{className:"text-center",children:R.runningTime})]}):(0,p.jsxs)(j.T6,{"v-for":"item in tableItems",children:[(0,p.jsx)(j.is,{color:"light",className:"text-center",children:"Now Playing"}),(0,p.jsx)(j.NN,{className:"text-center",colSpan:5,children:"-"},0)]})})]}),(0,p.jsx)("br",{}),R&&null!=R.id?(0,p.jsx)("div",{className:"d-grid gap-2",children:(0,p.jsx)(j.rb,{className:"justify-content-between",children:(0,p.jsx)(j.b7,{xs:12,children:(0,p.jsx)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:(0,p.jsx)(j.u5,{component:"input",color:"success",value:"\uace1\uc644\ub8cc",onClick:()=>I("\ud574\ub2f9\uace1\uc744 \uc644\ub8cc \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","complete")})})})})}):""]})]}),(0,p.jsxs)(j.xH,{className:"mb-4",children:[(0,p.jsxs)(j.bn,{children:[(0,p.jsx)("strong",{children:"\uc2e0\uccad\uace1\ubaa9\ub85d"})," ",(0,p.jsx)("small",{children:"  \uc624\uc804 6\uc2dc\uc5d0 \ucd08\uae30\ud654 \ub429\ub2c8\ub2e4."})," ",D.contents&&D.contents.length>0?(0,p.jsxs)("small",{children:["\ucd1d ",D.contents.length,"\uac74"]}):""]}),(0,p.jsxs)(j.sl,{children:[(0,p.jsx)("div",{className:"d-grid gap-2",children:(0,p.jsxs)(j.rb,{className:"justify-content-between",children:[(0,p.jsx)(j.b7,{xs:4,children:(0,p.jsx)(j.u5,{component:"input",type:"button",color:"danger",value:"\uc2e0\uccad\uace1 \ucd08\uae30\ud654",onClick:()=>{I("\uc2e0\uccad\uace1\uc744 \ucd08\uae30\ud654 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \ucd08\uae30\ud654\ud6c4 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","init")}})}),(0,p.jsx)(j.b7,{xs:8,children:(0,p.jsxs)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:[(0,p.jsx)(j.u5,{component:"input",type:"reset",color:"secondary",value:"\uc2e0\uccad\uace1 \ucd94\uac00",onClick:()=>{C(!k)}}),(0,p.jsx)(j.u5,{color:"light",onClick:U,children:(0,p.jsx)(l.Z,{icon:c.H,title:"Download file"})})]})})]})}),(0,p.jsx)("br",{}),(0,p.jsxs)(j.Sx,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,children:[(0,p.jsx)(j.V,{color:"light",children:(0,p.jsxs)(j.T6,{children:[(0,p.jsx)(j.is,{className:"text-center",children:"No"}),(0,p.jsx)(j.is,{className:"text-center",children:"\uc568\ubc94\uba85"}),(0,p.jsx)(j.is,{className:"text-center",children:"\uc544\ud2f0\uc2a4\ud2b8"}),(0,p.jsx)(j.is,{className:"text-center",children:"Track Number"}),(0,p.jsx)(j.is,{className:"text-center",children:"Title"}),(0,p.jsx)(j.is,{className:"text-center",children:"Table Number"}),(0,p.jsx)(j.is,{className:"text-center"}),(0,p.jsx)(j.is,{className:"text-center",children:"Running Time"})]})}),(0,p.jsx)(j.NR,{children:D&&D.length>0?D.map(((e,s)=>(0,p.jsxs)(j.T6,{"v-for":"item in tableItems",children:[(0,p.jsx)(j.NN,{className:"text-center",children:(0,p.jsx)("strong",{children:s+1})}),(0,p.jsx)(j.NN,{className:"text-left",children:(0,p.jsx)("a",{href:"/",onClick:s=>P(s,e.albumId),children:e.albumName})}),(0,p.jsx)(j.NN,{className:"text-left",children:e.artist}),(0,p.jsx)(j.NN,{className:"text-center",children:e.trackNumber}),(0,p.jsx)(j.NN,{className:"text-left",children:(0,p.jsx)("strong",{children:e.title})}),(0,p.jsx)(j.NN,{className:"text-center",children:"0"===e.tableName?"\uad00\ub9ac\uc790":e.tableName}),(0,p.jsxs)(j.NN,{className:"text-center",children:[(0,p.jsx)(j.u5,{color:"success",shape:"rounded-pill",className:"mb-3",onClick:s=>((e,s)=>{e.preventDefault(),I("\ud574\ub2f9\uace1\uc744 \uc120\uace1 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","pick"),G(s)})(s,e.songRequestId),children:"\uc120\uace1"}),(0,p.jsx)(j.u5,{color:"dark",shape:"rounded-pill",className:"mb-3",onClick:s=>((e,s)=>{e.preventDefault(),I("\ud574\ub2f9\uace1\uc744 \uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","delete"),G(s)})(s,e.songRequestId),children:"\uc0ad\uc81c"})]}),(0,p.jsx)(j.NN,{className:"text-center",children:e.runningTime})]},s))):(0,p.jsx)(j.T6,{"v-for":"item in tableItems",children:(0,p.jsx)(j.NN,{className:"text-center",colSpan:7,children:"\uc870\ud68c\ub41c \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."},0)})})]})]})]})]})})]})}}}]);
//# sourceMappingURL=8346.bdfe10ea.chunk.js.map